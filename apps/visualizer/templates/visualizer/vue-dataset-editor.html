{% load static %}

{% block dataset_editor %}


{# Vue templates #}

<script type="text/x-template" id="dataset-editor-template">
    <div id="home-container" class="ui container">
        <div class="dataset-editor-header">
            <h1>[[ filename ]]</h1>
            <div>
                <button v-if="new_dataset" @click="onCreate" class="ui button green">Create</button>
                <button v-else @click="onSave" class="ui button green">Save</button>
                <button @click="onCancel" class="ui button gray">Cancel</button>
            </div>
        </div>
        <div id="editor-comment" class="ui labeled input">
            <div class="ui label">
                Comment
            </div>
            <input id="comment" type="text" :value="[[ comment ]]" placeholder="Input">
        </div>
		<div id="data-table" class="ui container">
			<table class="ui celled striped table">
				<thead>
                    <tr>
						<th v-for="column_name in column_names" 
                         class="center aligned">[[ column_name ]]</th> 
					</tr> 
                    <tr>
						<th v-for="column_type, index in column_types" class="type-dropdown-cell center aligned">
                            <select @change="onChangeType($event, index)" class="type-dropdown" name="column_types" id="column_types">
                                <option
                                 v-for="type in datatypes" 
                                 :value="type"
                                 :selected="type === column_type">[[ type ]]</option>
                            </select>
                            <i class="dropdown icon"></i>
                        </th> 
					</tr> 
				</thead>
			    <tbody>
                    <dataset-editor-datarow
                     v-for="row in rows" :key="row.index" :data="row">
					</dataset-editor-datarow>
			  </tbody>
			</table>
		</div>
    </div>
</script>

<script type="text/x-template" id="dataset-editor-datarow-template">
    <tr>
		<td v-for="d in data" class="center aligned">[[ d ]]</td> 
    </tr>
</script>{% endblock %}
