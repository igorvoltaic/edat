{% load static %}

{% block dataset_render %}
<script type="text/x-template" id="dataset-render-template">
    <div id="home-container" class="ui container">
        <div class="dataset-render-header">
            <div class="render-options">
                <h1>[[ datasetInfo.name ]]</h1>
                <div>
                    <label>Y-axis</label>
                    <div class="select-dropdown">
                        <input @change="updatePlotParams($event)" type="hidden" name="y">
                        <i class="dropdown icon"></i>
                        <div class="dropdown-default">Select</div>
                        <div class="dropdown-menu">
                            <div 
                             v-for="name in datasetInfo.column_names" 
                             v-if="name.length > 0" 
                             class="dropdown-menu-item" 
                             @click="selectItem($event, name)"
                             >[[ name ]]</div>
                        </div>
                    </div>
                </div>
                <div>
                    <label>X-axis</label>
                    <div class="select-dropdown">
                        <input @change="updatePlotParams($event)" type="hidden" name="x">
                        <i class="dropdown icon"></i>
                        <div class="dropdown-default">Select</div>
                        <div class="dropdown-menu">
                            <div 
                             v-for="name in datasetInfo.column_names" 
                             v-if="name.length > 0" 
                             class="dropdown-menu-item" 
                             @click="selectItem($event, name)"
                             >[[ name ]]</div>
                        </div>
                    </div>
                </div>
                <div>
                    <label>Plot type</label>
                    <div class="select-dropdown">
                        <input @change="updatePlotDto($event)" type="hidden" name="plot_type">
                        <i class="dropdown icon"></i>
                        <div class="dropdown-default">Select</div>
                        <div class="dropdown-menu">
                            <div 
                             v-for="type in plot_types" 
                             class="dropdown-menu-item" 
                             @click="selectItem($event, type)"
                             >[[ type ]]</div>
                        </div>
                    </div>
                </div>
                <div>
                    <label>
                        Hue
                    </label>
                    <div class="select-dropdown">
                        <input @change="updatePlotParams($event)" type="hidden" name="hue">
                        <i class="dropdown icon"></i>
                        <div class="dropdown-default">Select</div>
                        <div class="dropdown-menu">
                            <div 
                             v-for="name in datasetInfo.column_names" 
                             v-if="name.length > 0" 
                             class="dropdown-menu-item" 
                             @click="selectItem($event, name)"
                             >[[ name ]]</div>
                        </div>
                    </div>
                </div>
                <div id="height" class="ui labeled input">
                    <label>
                        Height
                    </label>
                    <input id="height" type="text" placeholder="Input" name="height">
                </div>
                <div id="width" class="ui labeled input">
                    <label>
                        Width
                    </label>
                    <input id="width" type="text" placeholder="Input" name="width">
                </div>
                <button @click="renderDataset" 
                 class="ui button green" type="submit">Render</button>
            </div>
            <div id="rendered-plot" class="ui segment">
                    <img v-if="plotImgPath" 
                     @load="isLoading = false" 
                     class="" 
                     :class="{ hidden: isLoading }" 
                     :src="plotImgPath">
                <div v-if="isLoading" 
                 class="ui active centered medium inline loader">
                </div>
            </div>
        </div>
		<div id="data-table" class="ui container">
			<table class="ui celled striped table">
				<thead>
                    <tr>
						<th v-for="column_name in datasetInfo.column_names" 
                         class="center aligned">[[ column_name ]]</th> 
					</tr> 
                    <tr>
						<th v-for="column_type in datasetInfo.column_types" 
                         class="center aligned">[[ column_type ]]</th> 
					</tr> 
				</thead>
			    <tbody>
                    <dataset-editor-datarow
                     v-for="row, index in rows" 
                     v-if="index < 5"
                     :key="row.index" 
                     :data="row">
					</dataset-editor-datarow>
			  </tbody>
			</table>
		</div>
    </div>
</script>
{% endblock %}
